{% extends "layout.html" %}
{% block main_content %}

<div class="container">
    <div class="content_title">
        <h1>Media</h1>
    </div>

    <div class="container text-center">
        <div class="icons_container_external">
            <div class="row">
                <div class="col">
                    {% if user_type == 'video' %}
                    <!--YouTube iframe -->
                    <iframe width="560" height="315" src={{media_url}} title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                    {% endif %}
                    {% if user_type == 'sound' %}
                    <!--Spotify iframe -->
                    <iframe style="border-radius:12px" src={{media_url}} width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                    {% endif %}
                </div>
            </div>

            <!-- Ref used for submission of like button to be passed on checkbox change: https://stackoverflow.com/questions/10602470/submitting-a-form-when-a-checkbox-is-checked-->
            <form method="POST" id="MediaOutputForm" class="select_another_media_button">
                {{ form.hidden_tag() }}
                <div class="row">
                    <div clas="col">
                        {% if user_type == 'video' %}
                        <button type="submit" name="submit_new_media" value="new_media" class="submit_new_media">Select another video</button>
                        {% endif %}
                        {% if user_type == 'sound' %}
                        <button type="submit" name="submit_new_media" value="new_media" class="submit_new_media">Select another audio</button>
                        {% endif %}
                    </div>
                </div>
            </form>

            <!--Free source buttons: https://uiverse.io/KSAplay/smart-bobcat-50-->
            <label class="container_like">
                {% if favourite == True %}
                <input type="checkbox" class="fav_check" id="favourite_check" checked="checked" name="submit_favourite" onchange="document.getElementById('MediaOutputForm').submit()">
                {% else %}
                <input type="checkbox" class="fav_check" id="favourite_check" name="submit_favourite" onchange="document.getElementById('MediaOutputForm').submit()">
                {% endif %}
                <div class="checkmark">
                    <svg viewBox="0 0 256 256">
                        <rect fill="none" height="256" width="256"></rect>
                        <path
                            d="M224.6,51.9a59.5,59.5,0,0,0-43-19.9,60.5,60.5,0,0,0-44,17.6L128,59.1l-7.5-7.4C97.2,28.3,59.2,26.3,35.9,47.4a59.9,59.9,0,0,0-2.3,87l83.1,83.1a15.9,15.9,0,0,0,22.6,0l81-81C243.7,113.2,245.6,75.2,224.6,51.9Z"
                            stroke-width="20px" stroke="#FFF" fill="none"></path>
                    </svg>
                </div>
            </label>

        </div>
    </div>
</div>

<!--CHECK THIS TO STOP RELOAD AFTER FAVOURITE SUBMISSION: https://www.geeksforgeeks.org/flask-form-submission-without-page-reload/-->

{% endblock %}